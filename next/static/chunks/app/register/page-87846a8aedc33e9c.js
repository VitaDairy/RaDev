(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{9935:function(e,n,r){Promise.resolve().then(r.bind(r,3488))},3488:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return a}});var t=r(7437),s=r(3056),l=r(3874),o=r(6514),i=r(6463),d=r(2265);function a(){let e=(0,i.useRouter)(),{actionGetProvinces:n}=(0,s.Z)(),{phone:r,otp:a,actionRegister:u}=(0,s.Z)(),[p,h]=(0,d.useState)(null),[m,v]=(0,d.useState)(""),[x,b]=(0,d.useState)(""),[f,w]=(0,d.useState)(!0),[g,j]=(0,d.useState)({}),[N,k]=(0,d.useState)({name:"",password:"",provinceId:0,districtId:0,wardId:0,address:"",termsAccepted:!1,errors:{}});return(0,d.useEffect)(()=>{n().then(e=>{h((null==e?void 0:e.provinces)||null),k(n=>{var r;return{...n,provinceId:null==e?void 0:null===(r=e.provinces[0])||void 0===r?void 0:r.id}})})},[]),(0,d.useEffect)(()=>{w(!(""!==N.name&&""!==N.password&&""!==N.address&&0!==N.provinceId&&0!==N.districtId&&0!==N.wardId&&N.termsAccepted))},[N]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col items-center h-screen space-y-4 p-5 bg-white min-h-screen",children:[(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)("button",{onClick:()=>{e.push("/login")},children:(0,t.jsx)(o.Z,{className:"h-6 w-6 text-neutral dark:text-neutral ",strokeWidth:2})})}),(0,t.jsx)(c,{handleChange:e=>{let{name:n,value:r,type:t,checked:s}=e.target;console.log("\uD83D\uDE80 ~ handleChange ~ name, value, type, checked:",n,r,t,s),"provinceId"===n&&(r=Number(r),l.ZP.getWardsAndDistricts({code:Number(r)}).then(e=>{var n,r,t;v((null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.provinces)||null);let s=null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(r=t.provinces[0])||void 0===r?void 0:r.id;l.ZP.getWardsAndDistricts({code:s}).then(e=>{var n;b((null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.provinces)||null),k(n=>{var r,t;return{...n,districtId:s,wardId:null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(r=t.provinces[0])||void 0===r?void 0:r.id}})})})),"districtId"===n&&(r=Number(r),l.ZP.getWardsAndDistricts({code:Number(r)}).then(e=>{var n,r,t;b((null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.provinces)||null);let s=null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(r=t.provinces[0])||void 0===r?void 0:r.id;k(e=>({...e,wardId:s}))})),"wardId"===n&&(r=Number(r)),"confirmPassword"===n&&r!==N.password&&j(e=>({...e,confirmPassword:"Mật khẩu kh\xf4ng khớp"})),"password"===n&&r.length<6&&j(e=>({...e,password:"Mật khẩu phải lớn hơn 6 k\xfd tự"})),k(e=>({...e,[n]:"checkbox"===t?s:r}))},district:m,formData:N,handleSubmit:n=>{if(N.password!==N.confirmPassword){j(e=>({...e,errors:{confirmPassword:"Mật khẩu kh\xf4ng khớp"}}));return}if(N.password.length<6){j(e=>({...e,errors:{password:"Mật khẩu phải lớn hơn 6 k\xfd tự"}}));return}if(!1===N.termsAccepted){j(e=>({...e,termsAccepted:"Vui l\xf2ng chấp nhận điều khoản"}));return}N.phoneNumber=r,N.otp=a,N.firstName=N.name,N.lastName=N.name,l.ZP.register(N).then(async n=>{var r;console.log("\uD83D\uDE80 ~ handleSubmit ~ res",n),(null==n?void 0:null===(r=n.meta)||void 0===r?void 0:r.status)!==1e3?e.push("/login"):(await u(n),e.push("/home"))})},provinces:p,ward:x,isDisableButton:f},"123")]})})}let c=e=>{let{handleChange:n,formData:r,provinces:s,district:l,ward:o,handleSubmit:i,isDisableButton:d}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"mt-15 w-full",children:[(0,t.jsx)("label",{className:"block mb-2 text-sm font-medium text-primary500 dark:text-primary500 text-xs",children:"Bạn đ\xe3 x\xe1c thực số điện thoại th\xe0nh c\xf4ng, điền th\xf4ng tin để ho\xe0n tất nh\xe9"}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"text",name:"name",className:"border-0 border-b focus:outline-none border-inputGrey w-full pt-5 text-neutral text-xs font-normal pb-2",placeholder:"Họ v\xe0 T\xean",onChange:n})}),(0,t.jsx)("div",{children:(0,t.jsxs)("select",{name:"gender",value:r.gender,onChange:n,className:"appearance-none border-0 border-b focus:outline-none border-inputGrey w-full pt-5 text-neutral text-xs font-normal pb-2",required:!0,children:[(0,t.jsx)("option",{value:"",disabled:!0,className:"text-netral",children:"Giới t\xednh"}),(0,t.jsx)("option",{value:"male",children:"Nam"},"gender-nam"),(0,t.jsx)("option",{value:"female",children:"Nữ"},"gender-nu")]})}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"password",name:"password",value:r.password,onChange:n,className:"appearance-none border-0 border-b focus:outline-none border-inputGrey w-full pt-5 text-neutral text-xs pb-2",placeholder:"Mật khẩu (d\xf9ng cho ứng dụng)"})}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{name:"confirmPassword",value:r.confirmPassword,type:"password",onChange:n,className:"border-0 border-b focus:outline-none border-inputGrey w-full pt-5 text-neutral text-xs pb-2",placeholder:"X\xe1c nhận lại mật khẩu"})}),(0,t.jsx)("div",{children:(0,t.jsxs)("select",{name:"provinceId",value:r.provinceId,onChange:n,className:"appearance-none border-0 border-b focus:outline-none border-inputGrey w-full pt-5 text-neutral text-xs font-normal pb-2",required:!0,children:[(0,t.jsx)("option",{value:"0",children:"Tỉnh th\xe0nh"}),s&&(null==s?void 0:s.filter(e=>e.id<100).map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},"province-".concat(e.id))))]})}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("select",{name:"districtId",value:r.districtId,onChange:n,className:" appearance-none border-0 border-b focus:outline-none border-inputGrey w-full pt-5 text-neutral text-xs font-normal pb-2",required:!0,children:[(0,t.jsx)("option",{value:"0",disabled:!0,children:"Quận/huyện"}),l&&(null==l?void 0:l.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},"district-".concat(e.id))))]}),(0,t.jsxs)("select",{name:"wardId",value:r.wardId,onChange:n,className:"appearance-none border-0 border-b focus:outline-none border-inputGrey w-full pt-5 text-neutral text-xs font-normal pb-2",required:!0,children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"X\xe3/Phường"}),o&&(null==o?void 0:o.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},"ward-".concat(e.id))))]})]}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{name:"address",type:"text",value:r.address,className:"border-0 border-b focus:outline-none border-inputGrey w-full pt-5 text-neutral text-xs pb-2",placeholder:"Địa chỉ cụ thể",onChange:n})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center mb-4 mt-4",children:[(0,t.jsx)("input",{type:"checkbox",name:"termsAccepted",checked:r.termsAccepted,onChange:n,className:"h-4 w-4 text-blue-600",required:!0}),(0,t.jsxs)("label",{className:"ml-2 text-neutral500 text-xs",children:["T\xf4i đồng \xfd với c\xe1c"," ",(0,t.jsx)("a",{href:"/terms-of-service",className:"text-primary500 font-medium",children:"Điều khoản dịch vụ"})," ","của VitaDairy"]})]})}),(0,t.jsx)("button",{className:" ".concat(d?"bg-disabled opacity-50 cursor-not-allowed":"bg-gradient-button opacity-100"," font-bold py-4 px-4 rounded-full transition duration-300 min-w-full mt-5 bottom-0 left-0 h-11"),disabled:d,onClick:()=>{i()},children:"HO\xc0N TẤT"})]})})}},6514:function(e,n,r){"use strict";var t=r(2265);let s=t.forwardRef(function(e,n){let{title:r,titleId:s,...l}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},l),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});n.Z=s}},function(e){e.O(0,[461,56,971,23,744],function(){return e(e.s=9935)}),_N_E=e.O()}]);