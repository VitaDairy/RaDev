(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{6832:function(t,e,n){Promise.resolve().then(n.bind(n,3102))},6648:function(t,e,n){"use strict";n.d(e,{default:function(){return r.a}});var a=n(5601),r=n.n(a)},6463:function(t,e,n){"use strict";var a=n(1169);n.o(a,"usePathname")&&n.d(e,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(e,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(e,{useSearchParams:function(){return a.useSearchParams}})},5601:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var n in e)Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}(e,{default:function(){return l},getImageProps:function(){return o}});let a=n(9920),r=n(497),s=n(8173),i=a._(n(1241));function o(t){let{props:e}=(0,r.getImgProps)(t,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[t,n]of Object.entries(e))void 0===n&&delete e[t];return{props:e}}let l=s.Image},3102:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return h}});var a=n(7437),r=n(2970),s=n(6648),i=n(6463);function o(t){let{isOpen:e,togglePopup:n}=t;return(0,i.useRouter)(),(0,a.jsx)(a.Fragment,{children:e&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-80",children:(0,a.jsx)("div",{className:"flex justify-center mb-4 rounded-lg",children:(0,a.jsx)(s.default,{src:"/static/sbps/gif/luckywheel.gif",alt:"OTP Error",width:300,height:182,className:"rounded-lg"})})})})})}let l={error:{image:"",title:"Th\xf4ng b\xe1o",content:"Cảm ơn qu\xfd kh\xe1ch h\xe0ng đ\xe3 mua h\xe0ng v\xe0 tham gia x\xe1c thự thẻ. Rất tiếc, m\xe3 thẻ n\xe0y sẽ được tham gia Chương tr\xecnh V\xf2ng quay may"},INSTALL_APP:{image:"/static/sbps/banner/banner_login.png",title:"Bạn c\xf3 cơ hội được t\xedch xu v\xe0 tham gia V\xf2ng quay may mắn tr\xean ứng đụng VitaDairy - Đổi muỗng nhận qu\xe0",titleClass:"text-gift",content:"Tải ứng dụng để t\xedch xu ngay bạn nh\xe9.",type:"gift",btn:{text:"TẢI ỨNG DỤNG",className:"bg-gradient-button",link:"/home"},btn2:{text:"VỀ TRANG CHỦ",className:"bg-gradient-button",link:"/home"}}};function c(t){let{isOpen:e,togglePopup:n,code:r}=t,o=(0,i.useRouter)(),{image:c,title:u,content:d,btn:h,btn2:m,titleClass:x,contentClass:g,subContent:p,subContentClass:f}=l.INSTALL_APP||l.error||{};return(0,a.jsx)(a.Fragment,{children:e&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-80",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4 rounded-lg",children:(0,a.jsx)(s.default,{src:c,alt:"OTP Error",width:300,height:182,className:"rounded-lg"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-error400 font-semibold text-lg ".concat(x),children:u}),(0,a.jsx)("p",{className:"text-neutral900 text-sm mt-2 font-light ".concat(g),children:d}),p&&(0,a.jsx)("p",{className:"text-neutral900 text-sm mt-2 font-light ".concat(f),children:p})]}),(0,a.jsx)("div",{className:"mt-6",children:h&&(0,a.jsx)("button",{onClick:()=>{n(),h.link&&o.push(h.link)},className:"w-full py-2 text-white rounded-full text-sm font-bold h-10 ".concat(h.className),children:h.text})}),m&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("button",{onClick:()=>{n(),m.link&&o.push(m.link)},className:"w-full py-2 rounded-full text-sm font-bold h-10 ".concat(m.className),children:m.text})})]})})})}var u=n(3874),d=n(2265);function h(){let t=(0,i.useSearchParams)().get("code"),[e,n]=(0,d.useState)(),[l,h]=(0,d.useState)(!1),[m,x]=(0,d.useState)(null),g=()=>{h(!l)},[p,f]=(0,d.useState)(!1),v=()=>{u.ZP.getQrCode({qrCode:t}).then(t=>{n(t.response)})},b=()=>{u.ZP.validateProduct({qrCode:t,sku:e.sku,mock:!0}).then(t=>{1e3===t.meta.status&&(console.log("\uD83D\uDE80 ~ loyaltyService.validateProduct ~ res.notification:",t.notification),f(!0),x(t.notification)),g()})},[y,N]=(0,d.useState)(!1),j=()=>{N(!y)},w=()=>{j()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{title:p?"X\xe1c thực sản phảm th\xe0nh c\xf4ng":"Th\xf4ng tin sản phẩm",inputSearch:!1,showPoint:!1,showBack:!0}),(0,a.jsxs)("div",{className:"flex flex-col p-2 bg-white min-h-screen text-left",children:[p?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-center mb-4 rounded-lg",children:(0,a.jsx)(s.default,{src:"/static/sbps/banner/otp_error.png",alt:"OTP Error",width:300,height:182,className:"rounded-lg"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-neutral900 font-semibold text-lg",children:"X\xe1c thực sản phẩm th\xe0nh c\xf4ng"}),(0,a.jsx)("p",{className:"text-neutral900 text-sm mt-2 font-light",children:"Cảm ơn bạn tham gia x\xe1c thực sản phẩm đ\xe3 sử dụng!"})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{onClick:()=>{w()},className:"w-full py-2 bg-gradient-button text-white rounded-lg text-sm font-bold h-10",children:"TIẾP TỤC"})}),y&&(0,a.jsx)(o,{isOpen:y,togglePopup:j})]}):e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("h2",{className:"font-normal text-neutral900",children:"T\xean sản phẩm"}),(0,a.jsx)("p",{className:"font-normal text-neutral700 text-sm pt-2",children:null==e?void 0:e.name}),(0,a.jsx)("h2",{className:"font-normal text-neutral900",children:"Khối lượng/Dung t\xedch"}),(0,a.jsxs)("p",{className:"font-normal text-neutral700 text-sm pt-2",children:[null==e?void 0:e.weigh,null==e?void 0:e.weighType]}),(0,a.jsx)("h2",{className:"font-normal text-neutral900",children:"Ng\xe0y sản xuất"}),(0,a.jsx)("p",{className:"font-normal text-neutral700 text-sm pt-2",children:null==e?void 0:e.created_at}),(0,a.jsx)("h2",{className:"font-normal text-neutral900",children:"Ng\xe0y hết hạn"}),(0,a.jsx)("p",{className:"font-normal text-neutral700 text-sm pt-2",children:null==e?void 0:e.expired_at})]}),(0,a.jsx)("div",{className:"border-t border-dashed border-gray-300 mt-5"}),(0,a.jsx)("p",{className:"font-normal text-neutral700 text-sm pt-2",children:"Sau khi x\xe1c nhận th\xf4ng tin sản phẩm, h\xe3y nhấn X\xc1C THỰC để tiến h\xe0nh đổi muỗng."}),(0,a.jsx)("div",{className:"mt-10",children:(0,a.jsx)("button",{onClick:()=>{b()},className:"w-full py-1 bg-gradient-button text-white rounded-lg font-bold text-sm h-10",children:"X\xc1C THỰC"})})]}):(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("h2",{className:"font-normal text-neutral900",children:'Th\xf4ng tin "M\xe3 dự thưởng"'}),(0,a.jsx)("span",{className:"font-normal text-neutral700 text-sm pt-2",children:'M\xe3 dự thưởng c\xf3 thể t\xecm thấy trong thẻ c\xe0o b\xean cạnh "M\xe3 QR dự thưởng"'}),(0,a.jsx)("p",{className:"font-normal text-neutral700 pt-5",children:"ABXXXXXXX"}),(0,a.jsx)("input",{className:"font-normal text-neutral700 pt-5 pb-5",value:t+""}),(0,a.jsx)("div",{className:"border-1 border-dashed w-full border-neutral900"}),(0,a.jsx)("p",{className:"font-normal text-neutral700 text-xs",children:"Đối với c\xe1c sản phẩm c\xf3 thẻ c\xe0o chứa ‘M\xe3 thẻ c\xe0o t\xedch điểm’ bạn sẽ c\xf3 cơ hội t\xedch xu để đổi qu\xe0 v\xe0 01 lượt tham gia Chương tr\xecnh V\xf2ng quay may mắn. Đối với c\xe1c sản phẩm c\xf3 thẻ c\xe0o chứa ‘M\xe3 dự thưởng’ bạn sẽ c\xf3 ngay 01 lượt tham gia Chương tr\xecnh V\xf2ng quay may mắn. Thời gian diễn ra chương tr\xecnh: 01/11/2024 – 28/02/2025"}),(0,a.jsx)("div",{className:"mt-10",children:(0,a.jsx)("button",{onClick:()=>{v()},className:"w-full py-1 bg-gradient-button text-white rounded-lg font-bold text-sm h-10",children:"KIỂM TRA TH\xd4NG TIN"})})]}),l&&(0,a.jsx)(c,{isOpen:l,togglePopup:g,code:(null==m?void 0:m.code)||""})]})]})}},2970:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var a=n(7437),r=n(6514),s=n(2265);let i=s.forwardRef(function(t,e){let{title:n,titleId:a,...r}=t;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":a},r),n?s.createElement("title",{id:a},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});var o=n(6648),l=n(6463),c=t=>{let{title:e,inputSearch:n=!0,showPoint:s=!0,showBack:c=!1,backUrl:u="",showInputVoucher:d=!1}=t,h=(0,l.useRouter)(),m=(0,l.usePathname)();return console.log("\uD83D\uDE80 ~ HeaderWithSearch ~ pathName:",m,m.startsWith("/noti")),(0,a.jsxs)("header",{className:"".concat(m.startsWith("/noti")?"bg-[#2CB6A3]":"bg-gradient-button","  p-4 relative"),children:[(0,a.jsx)("div",{className:"flex justify-between items-center"}),(0,a.jsxs)("div",{className:"text-center mt-4 flex justify-between ",children:[(0,a.jsxs)("h1",{className:"text-white text-[18px] font-semibold pt-1 flex",children:[c&&(0,a.jsx)(r.Z,{className:"w-6 h-6 text-white mt-1 mr-2 cursor-pointer",strokeWidth:2,onClick:()=>{if(u){h.push(u);return}h.back()}}),e]}),s&&(0,a.jsxs)("div",{className:"absolute right-4 bg-white rounded-full px-2 py-1 flex items-center shadow-lg  border border-accent01 border-2",children:[(0,a.jsx)("span",{className:"text-black text-sm font-semibold mr-1",children:"24"}),(0,a.jsx)(o.default,{src:"/static/icons/menu.svg",alt:"Notification",width:24,height:24})]}),d&&(0,a.jsx)("div",{className:"absolute right-4 px-2 py-1 flex items-center ",children:(0,a.jsx)("button",{onClick:()=>{h.push("/qr/detail")},children:(0,a.jsx)(o.default,{src:"/static/sbps/icons/input_voucher.svg",alt:"Notification",width:24,height:24})})})]}),n&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("div",{className:"flex items-center bg-white rounded-full p-2 shadow",children:[(0,a.jsx)(i,{className:"w-6 h-6 text-blue-500 ml-2"}),(0,a.jsx)("input",{type:"text",placeholder:"Qu\xe0 hot h\xf4m nay",className:"ml-2 w-full border-none outline-none placeholder-neutral500 font-normal font-sm text-neutral900",style:{fontWeight:400}})]})})]})}},3874:function(t,e,n){"use strict";n.d(e,{ZP:function(){return l}});let a=async t=>{let{url:e,method:n,body:a,authorization:r,headers:s={}}=t;try{let t={"Content-Type":"application/json",...s};r&&(t.Authorization=r),("GET"===n||"DELETE"===n)&&(e="".concat(e,"?").concat(new URLSearchParams(a).toString()),a=void 0);let i=a?JSON.stringify(a):void 0,o=await fetch(e,{method:n,headers:t,body:i});return null==o?void 0:o.json()}catch(t){return console.log(t),{error:t,status:500}}},r="https://api-sandbox.vitadairyvietnam.vn",s=()=>{try{var t,e;let n=(null===(t=localStorage)||void 0===t?void 0:t.getItem("login-storage"))||"{}",a=JSON.parse(n);return(null==a?void 0:null===(e=a.state)||void 0===e?void 0:e.authorization)||""}catch(t){return null}},i=["2024_SBPS_OTO","2024_SBPS_IPHONE","2024_SBPS_10TR","2024_SBPS_5TR","2024_SBPS_THE20K","2024_SBPS_THE10K","2024_SBPS_CHUCMAYMAN","2024_SBPS_HETGIAI","SBPS_QR_USED"],o=0;var l={getUser:async()=>await a({url:"".concat(r,"/api-v3/loyalty/v1/user"),method:"GET",authorization:s()}),getNotificationUnread:async()=>await a({url:"".concat(r,"/api-v3/loyalty/v1/user/notification/unread-count"),method:"GET",authorization:s()}),getMyRewards:async()=>await a({url:"".concat(r,"/v4/gs/user-gifts"),method:"GET",authorization:s()}),sendOTP:async(t,e)=>"LOGIN"===e?(e="REGISTER",await a({url:"".concat(r,"/api/user/send-otp"),method:"POST",headers:{appversioncode:12,appversionname:"3.2.27"},body:{phoneNumber:t,type:"log_in_calosure"}})):await a({url:"".concat(r,"/api-v3/loyalty/send-zalo"),method:"POST",body:{phone:t,source:e},authorization:s()}),verifyOTP:async(t,e)=>await a({url:"".concat(r,"/api-v3/loyalty/verify-otp"),method:"POST",body:{phone:t,otp:e},authorization:s()}),getNotifications:async t=>{let{page:e=1,size:n=20}=t,i=await a({url:"".concat(r,"/api-v3/noti/user/noti"),method:"GET",authorization:s(),body:{page:e,size:n}});return console.log("\uD83D\uDE80 ~ getNotifications ~ response:",i),i},getDetailNotifications:async t=>{let{id:e,page:n=1,size:i=20}=t;return await a({url:"".concat(r,"/api-v3/noti/user/noti/").concat(e),method:"GET",authorization:s()})},readDetailNotifications:async t=>{let{id:e}=t;return await a({url:"".concat(r,"/api-v3/noti/user/noti/").concat(e,"/read"),method:"POST",authorization:s(),body:{id:e}})},getAddress:async t=>{let{auth:e}=t;return await a({url:"".concat(r,"/api/recipient/me"),method:"GET",authorization:e||s()})},logout:async()=>await a({url:"".concat(r,"/api/user/logout"),method:"POST",authorization:s()}),verifyPhoneNumber:async t=>await a({url:"".concat(r,"/api-v3/loyalty/v1/user/auth/check-phone-number"),method:"GET",authorization:s(),body:{phoneNumber:t}}),getProvinces:async()=>await a({url:"".concat(r,"/api/province/vn"),method:"GET",authorization:s()}),getWardsAndDistricts:async t=>{let{code:e}=t;return await a({url:"".concat(r,"/api/province/parent/").concat(e),method:"GET",authorization:s()})},register:async t=>await a({url:"".concat(r,"/api/user/register"),method:"POST",body:t,headers:{appversioncode:12,appversionname:"3.1.2",webapp_name:"SBPS"}}),login:async(t,e)=>await a({url:"".concat(r,"/api/user/login-calosure"),method:"POST",body:{phoneNumber:t,otp:e},headers:{appversioncode:2,appversionname:"3.2.10"}}),verifyBlockedScan:async()=>await a({url:"".concat(r,"/api-v3/loyalty/v1/user/blocked-scan"),method:"GET",authorization:s()}),getQrCode:async t=>{let{qrCode:e}=t;return await a({url:"".concat(r,"/api-v3/loyalty/v1/user/qr-code/qr-information"),method:"GET",authorization:s(),body:{qrCode:e}})},validateProduct:async t=>{let{qrCode:e,sku:n,mock:l=!0}=t;return l?((o+=1)>=i.length&&(o=0),{response:null,meta:{status:1e3},notification:{code:i[o]}}):await a({url:"".concat(r,"/api-v3/loyalty/v1/user/qr-code/scan-product/SBPS"),method:"POST",authorization:s(),body:{qrCode:e,sku:n}})}}},6514:function(t,e,n){"use strict";var a=n(2265);let r=a.forwardRef(function(t,e){let{title:n,titleId:r,...s}=t;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":r},s),n?a.createElement("title",{id:r},n):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});e.Z=r}},function(t){t.O(0,[173,971,23,744],function(){return t(t.s=6832)}),_N_E=t.O()}]);